const createDiagramTests = [
  {
    it: 'create diagram for block (""+""): simple test',
    args: [
      {
        id: 'sN$?m0):kd}W:QhlX=xx',
        inputList: [
          {
            type: 1,
            connection: {
              type: 1,
              targetConnection: {
                sourceBlock_: {
                  id: '142l46Xy(NLk-D#/oQ]9',
                  inputList: [
                    { type: 5, connection: null, fieldRow: [{ text_: '' }] },
                  ],
                  type: 'math_number',
                  squareTopLeftCorner_: true,
                },
                type: 2,
              },
            },
            fieldRow: [],
          },
          {
            type: 1,
            connection: {
              type: 1,
              targetConnection: {
                sourceBlock_: {
                  id: 'd1fnzPD[kbn;de5ps~ZY',
                  inputList: [
                    { type: 5, connection: null, fieldRow: [{ text_: '' }] },
                  ],
                  type: 'math_number',
                  squareTopLeftCorner_: true,
                },
                type: 2,
              },
            },
            fieldRow: [{ text_: '+' }],
          },
        ],
        parentBlock_: null,
        type: 'operator_add',
        squareTopLeftCorner_: true,
      },
      {
        topBlock: 'sN$?m0):kd}W:QhlX=xx',
        blockContainer: {
          _cache: {
            _executeCached: {
              '142l46Xy(NLk-D#/oQ]9': {
                id: '142l46Xy(NLk-D#/oQ]9',
                _isShadowBlock: true,
                _shadowValue: '',
                _parentKey: 'NUM1',
                _parentValues: {},
              },
              'd1fnzPD[kbn;de5ps~ZY': {
                id: 'd1fnzPD[kbn;de5ps~ZY',
                _isShadowBlock: true,
                _shadowValue: '',
                _parentKey: 'NUM2',
              },
              'sN$?m0):kd}W:QhlX=xx': {
                id: 'sN$?m0):kd}W:QhlX=xx',
                _isShadowBlock: false,
                _shadowValue: false,
                _parentKey: null,
                _parentValues: null,
              },
            },
          },
        },
        justReported: 0,
      },
    ],
    expected: {
      nodes: [
        {
          nodePlug: { valA: 1, valB: 0 },
          content: [{ content: '0' }],
          type: 'Number',
          value: '0',
        },
        {
          nodePlug: { valA: 2, valB: 0 },
          content: [{ content: '0' }],
          type: 'Number',
          value: '0',
        },
        {
          nodePlug: { valA: 0, valB: 0 },
          content: [
            { valA: 0, valB: 1, type: 'Number' },
            { content: ' + ' },
            { valA: 0, valB: 2, type: 'Number' },
          ],
          type: 'Number',
          value: '0',
        },
      ],
      edges: [
        {
          plugA: { valA: 0, valB: 1, type: 'Number' },
          plugB: { valA: 1, valB: 0 },
        },
        {
          plugA: { valA: 0, valB: 2, type: 'Number' },
          plugB: { valA: 2, valB: 0 },
        },
      ],
      root: {
        nodePlug: { valA: 0, valB: 0 },
        content: [
          { valA: 0, valB: 1, type: 'Number' },
          { content: ' + ' },
          { valA: 0, valB: 2, type: 'Number' },
        ],
        type: 'Number',
        value: '0',
      },
    },
  },
  {
    it: 'create diagram for block ("23"+"5"): test for non-empty shadow blocks',
    args: [
      {
        id: '0c3v@0V;@PgX{Mgb0@Qb',
        inputList: [
          {
            type: 1,
            connection: {
              type: 1,
              targetConnection: {
                sourceBlock_: {
                  id: '#H(RFB1t,+#Wl91iJ1oE',
                  inputList: [
                    {
                      type: 5,
                      connection: null,
                      fieldRow: [{ text_: '23', useTouchInteraction_: false }],
                    },
                  ],
                  type: 'math_number',
                  squareTopLeftCorner_: true,
                },
                type: 2,
              },
            },
            fieldRow: [],
          },
          {
            type: 1,
            connection: {
              type: 1,
              targetConnection: {
                sourceBlock_: {
                  id: '}IjUDd;dX?Cb/CH^*4=f',
                  inputList: [
                    {
                      type: 5,
                      connection: null,
                      fieldRow: [{ text_: '5', useTouchInteraction_: false }],
                    },
                  ],
                  type: 'math_number',
                  squareTopLeftCorner_: true,
                },
                type: 2,
              },
            },
            fieldRow: [{ text_: '+' }],
          },
        ],
        parentBlock_: null,
        type: 'operator_add',
        squareTopLeftCorner_: true,
      },
      {
        topBlock: '0c3v@0V;@PgX{Mgb0@Qb',
        blockContainer: {
          _cache: {
            _executeCached: {
              '#H(RFB1t,+#Wl91iJ1oE': {
                id: '#H(RFB1t,+#Wl91iJ1oE',
                _isShadowBlock: true,
                _shadowValue: '23',
                _parentKey: 'NUM1',
                _parentValues: {},
              },
              '}IjUDd;dX?Cb/CH^*4=f': {
                id: '}IjUDd;dX?Cb/CH^*4=f',
                _isShadowBlock: true,
                _shadowValue: '5',
                _parentKey: 'NUM2',
              },
              '0c3v@0V;@PgX{Mgb0@Qb': {
                id: '0c3v@0V;@PgX{Mgb0@Qb',
                _isShadowBlock: false,
                _shadowValue: false,
                _parentKey: null,
                _parentValues: null,
              },
            },
          },
        },
        justReported: 28,
      },
    ],
    expected: {
      nodes: [
        {
          nodePlug: { valA: 1, valB: 0 },
          content: [{ content: '23' }],
          type: 'Number',
          value: '23',
        },
        {
          nodePlug: { valA: 2, valB: 0 },
          content: [{ content: '5' }],
          type: 'Number',
          value: '5',
        },
        {
          nodePlug: { valA: 0, valB: 0 },
          content: [
            { valA: 0, valB: 1, type: 'Number' },
            { content: ' + ' },
            { valA: 0, valB: 2, type: 'Number' },
          ],
          type: 'Number',
          value: '28',
        },
      ],
      edges: [
        {
          plugA: { valA: 0, valB: 1, type: 'Number' },
          plugB: { valA: 1, valB: 0 },
        },
        {
          plugA: { valA: 0, valB: 2, type: 'Number' },
          plugB: { valA: 2, valB: 0 },
        },
      ],
      root: {
        nodePlug: { valA: 0, valB: 0 },
        content: [
          { valA: 0, valB: 1, type: 'Number' },
          { content: ' + ' },
          { valA: 0, valB: 2, type: 'Number' },
        ],
        type: 'Number',
        value: '28',
      },
    },
  },
  {
    it: 'create diagram for block ("3"*("2"+"1")): test for nested non-shadow blocks',
    args: [
      {
        rendered: true,
        useDragSurface_: true,
        id: 'TYs]/gUeR_ZLPJue8pA_',
        nextConnection: null,
        previousConnection: null,
        inputList: [
          {
            type: 1,
            name: 'NUM1',
            connection: {
              type: 1,
              hidden_: false,
              targetConnection: {
                sourceBlock_: {
                  rendered: true,
                  useDragSurface_: true,
                  id: '.+YFt]jA(5jOy.lWl}w1',
                  nextConnection: null,
                  previousConnection: null,
                  inputList: [
                    {
                      type: 5,
                      name: '',
                      connection: null,
                      fieldRow: [
                        {
                          decimalAllowed_: true,
                          negativeAllowed_: true,
                          exponentialAllowed_: true,
                          text_: '3',
                          maxDisplayLength: null,
                          name: 'NUM',
                          arrowWidth_: 0,
                          renderWidth: 14.912036895751953,
                          renderSep: 0,
                        },
                      ],
                      outlinePath: null,
                      renderHeight: 32,
                      renderWidth: 0,
                      fieldWidth: 14.912036895751953,
                    },
                  ],
                  inputsInline: true,
                  disabled: false,
                  tooltip: '',
                  contextMenu: true,
                  deletable_: true,
                  movable_: true,
                  editable_: true,
                  isShadow_: true,
                  collapsed_: false,
                  checkboxInFlyout_: false,
                  comment: null,
                  outputShape_: 2,
                  category_: null,
                  isInFlyout: false,
                  isInMutator: false,
                  RTL: false,
                  isInsertionMarker_: false,
                  type: 'math_number',
                  colour_: '#FFFFFF',
                  colourSecondary_: '#FFFFFF',
                  colourTertiary_: '#389438',
                  inputsInlineDefault: true,
                  eventsInit_: true,
                  startHat_: false,
                  squareTopLeftCorner_: true,
                  edgeShapeWidth_: 16,
                  edgeShape_: 2,
                  width: 40,
                  height: 32,
                },
                type: 2,
                hidden_: false,
                x_: 130,
                y_: 338,
                inDB_: true,
              },
              x_: 130,
              y_: 338,
              inDB_: true,
            },
            fieldRow: [],
            renderHeight: 40,
            renderWidth: 40,
            fieldWidth: 0,
          },
          {
            type: 1,
            name: 'NUM2',
            connection: {
              type: 1,
              hidden_: false,
              targetConnection: {
                sourceBlock_: {
                  rendered: true,
                  useDragSurface_: true,
                  id: 'mdT@!s,+V6|KauW!4ZbU',
                  nextConnection: null,
                  previousConnection: null,
                  inputList: [
                    {
                      type: 1,
                      name: 'NUM1',
                      connection: {
                        type: 1,
                        hidden_: false,
                        targetConnection: {
                          sourceBlock_: {
                            rendered: true,
                            useDragSurface_: true,
                            id: 'eC0,l]nuLvV+-zqVB?Sg',
                            nextConnection: null,
                            previousConnection: null,
                            inputList: [
                              {
                                type: 5,
                                name: '',
                                connection: null,
                                fieldRow: [
                                  {
                                    decimalAllowed_: true,
                                    negativeAllowed_: true,
                                    exponentialAllowed_: true,
                                    text_: '2',
                                    maxDisplayLength: null,
                                    name: 'NUM',
                                    arrowWidth_: 0,
                                    renderWidth: 14.912036895751953,
                                    renderSep: 0,
                                  },
                                ],
                                outlinePath: null,
                                renderHeight: 32,
                                renderWidth: 0,
                                fieldWidth: 14.912036895751953,
                              },
                            ],
                            inputsInline: true,
                            disabled: false,
                            tooltip: '',
                            contextMenu: true,
                            deletable_: true,
                            movable_: true,
                            editable_: true,
                            isShadow_: true,
                            collapsed_: false,
                            checkboxInFlyout_: false,
                            comment: null,
                            outputShape_: 2,
                            category_: null,
                            isInFlyout: false,
                            isInMutator: false,
                            RTL: false,
                            isInsertionMarker_: false,
                            type: 'math_number',
                            colour_: '#FFFFFF',
                            colourSecondary_: '#FFFFFF',
                            colourTertiary_: '#389438',
                            inputsInlineDefault: true,
                            eventsInit_: true,
                            startHat_: false,
                            squareTopLeftCorner_: true,
                            edgeShapeWidth_: 16,
                            edgeShape_: 2,
                            width: 40,
                            height: 32,
                          },
                          type: 2,
                          hidden_: false,
                          x_: 196.234375,
                          y_: 338,
                          inDB_: true,
                        },
                        x_: 196.234375,
                        y_: 338,
                        inDB_: true,
                      },
                      fieldRow: [],
                      renderHeight: 40,
                      renderWidth: 40,
                      fieldWidth: 0,
                    },
                    {
                      type: 1,
                      name: 'NUM2',
                      connection: {
                        type: 1,
                        hidden_: false,
                        targetConnection: {
                          sourceBlock_: {
                            rendered: true,
                            useDragSurface_: true,
                            id: '-jreOS-j/F6Z;BlCC#=`',
                            nextConnection: null,
                            previousConnection: null,
                            inputList: [
                              {
                                type: 5,
                                name: '',
                                connection: null,
                                fieldRow: [
                                  {
                                    decimalAllowed_: true,
                                    negativeAllowed_: true,
                                    exponentialAllowed_: true,
                                    text_: '1',
                                    maxDisplayLength: null,
                                    name: 'NUM',
                                    arrowWidth_: 0,
                                    renderWidth: 14.90625,
                                    renderSep: 0,
                                  },
                                ],
                                outlinePath: null,
                                renderHeight: 32,
                                renderWidth: 0,
                                fieldWidth: 14.90625,
                              },
                            ],
                            inputsInline: true,
                            disabled: false,
                            tooltip: '',
                            contextMenu: true,
                            deletable_: true,
                            movable_: true,
                            editable_: true,
                            isShadow_: true,
                            collapsed_: false,
                            checkboxInFlyout_: false,
                            comment: null,
                            outputShape_: 2,
                            category_: null,
                            isInFlyout: false,
                            isInMutator: false,
                            RTL: false,
                            isInsertionMarker_: false,
                            type: 'math_number',
                            colour_: '#FFFFFF',
                            colourSecondary_: '#FFFFFF',
                            colourTertiary_: '#389438',
                            inputsInlineDefault: true,
                            eventsInit_: true,
                            startHat_: false,
                            squareTopLeftCorner_: true,
                            edgeShapeWidth_: 16,
                            edgeShape_: 2,
                            width: 40,
                            height: 32,
                          },
                          type: 2,
                          hidden_: false,
                          x_: 261.578125,
                          y_: 338,
                          inDB_: true,
                        },
                        x_: 261.578125,
                        y_: 338,
                        inDB_: true,
                      },
                      fieldRow: [
                        {
                          text_: '+',
                          arrowWidth_: 0,
                          renderWidth: 9.34375,
                          renderSep: 0,
                        },
                      ],
                      renderHeight: 40,
                      renderWidth: 40,
                      fieldWidth: 9.34375,
                    },
                  ],
                  inputsInline: true,
                  disabled: false,
                  tooltip: '',
                  contextMenu: true,
                  deletable_: true,
                  movable_: true,
                  editable_: true,
                  isShadow_: false,
                  collapsed_: false,
                  checkboxInFlyout_: false,
                  comment: null,
                  outputShape_: 2,
                  category_: 'operators',
                  isInFlyout: false,
                  isInMutator: false,
                  RTL: false,
                  isInsertionMarker_: false,
                  type: 'operator_add',
                  colour_: '#59C059',
                  colourSecondary_: '#46B946',
                  colourTertiary_: '#389438',
                  inputsInlineDefault: true,
                  eventsInit_: true,
                  startHat_: false,
                  squareTopLeftCorner_: true,
                  edgeShapeWidth_: 20,
                  edgeShape_: 2,
                  width: 113.34375,
                  height: 40,
                },
                type: 2,
                hidden_: false,
                x_: 192.234375,
                y_: 338,
                inDB_: true,
              },
              x_: 192.234375,
              y_: 338,
              inDB_: true,
            },
            fieldRow: [
              {
                text_: '*',
                arrowWidth_: 0,
                renderWidth: 6.234375,
                renderSep: 0,
              },
            ],
            renderHeight: 48,
            renderWidth: 113.34375,
            fieldWidth: 6.234375,
          },
        ],
        inputsInline: true,
        disabled: false,
        tooltip: '',
        contextMenu: true,
        parentBlock_: null,
        deletable_: true,
        movable_: true,
        editable_: true,
        isShadow_: false,
        collapsed_: false,
        checkboxInFlyout_: false,
        comment: null,
        outputShape_: 2,
        category_: 'operators',
        isInFlyout: false,
        isInMutator: false,
        RTL: false,
        isInsertionMarker_: false,
        type: 'operator_multiply',
        colour_: '#59C059',
        colourSecondary_: '#46B946',
        colourTertiary_: '#389438',
        inputsInlineDefault: true,
        eventsInit_: true,
        startHat_: false,
        squareTopLeftCorner_: true,
        edgeShapeWidth_: 24,
        edgeShape_: 2,
        width: 183.578125,
        height: 48,
        isGlowingStack_: false,
      },
      {
        topBlock: 'TYs]/gUeR_ZLPJue8pA_',
        status: 4,
        isKilled: false,
        blockContainer: {
          _cache: {
            _executeCached: {
              '.+YFt]jA(5jOy.lWl}w1': {
                id: '.+YFt]jA(5jOy.lWl}w1',
                opcode: 'math_number',
                _profiler: null,
                _profilerFrame: null,
                _isHat: false,
                _definedBlockFunction: false,
                _isShadowBlock: true,
                _shadowValue: '3',
                _parentKey: 'NUM1',
                _parentValues: { NUM1: '3', NUM2: 3 },
              },
              'eC0,l]nuLvV+-zqVB?Sg': {
                id: 'eC0,l]nuLvV+-zqVB?Sg',
                opcode: 'math_number',
                _profiler: null,
                _profilerFrame: null,
                _isHat: false,
                _definedBlockFunction: false,
                _isShadowBlock: true,
                _shadowValue: '2',
                _parentKey: 'NUM1',
                _parentValues: { NUM1: '2', NUM2: '1' },
              },
              '-jreOS-j/F6Z;BlCC#=`': {
                id: '-jreOS-j/F6Z;BlCC#=`',
                opcode: 'math_number',
                _profiler: null,
                _profilerFrame: null,
                _isHat: false,
                _definedBlockFunction: false,
                _isShadowBlock: true,
                _shadowValue: '1',
                _parentKey: 'NUM2',
                _parentValues: { NUM1: '2', NUM2: '1' },
              },
              'mdT@!s,+V6|KauW!4ZbU': {
                id: 'mdT@!s,+V6|KauW!4ZbU',
                opcode: 'operator_add',
                _profiler: null,
                _profilerFrame: null,
                _isHat: false,
                _definedBlockFunction: true,
                _isShadowBlock: false,
                _shadowValue: false,
                _parentKey: 'NUM2',
                _parentValues: { NUM1: '3', NUM2: 3 },
              },
              'TYs]/gUeR_ZLPJue8pA_': {
                id: 'TYs]/gUeR_ZLPJue8pA_',
                opcode: 'operator_multiply',
                _profiler: null,
                _profilerFrame: null,
                _isHat: false,
                _definedBlockFunction: true,
                _isShadowBlock: false,
                _shadowValue: false,
                _parentKey: null,
                _parentValues: null,
              },
            },
          },
        },
        requestScriptGlowInFrame: true,
        blockGlowInFrame: 'TYs]/gUeR_ZLPJue8pA_',
        warpTimer: null,
        justReported: 9,
        stackClick: false,
        updateMonitor: false,
      },
    ],
    expected: {
      nodes: [
        {
          nodePlug: { valA: 1, valB: 0 },
          content: [{ content: '3' }],
          type: 'Number',
          value: '3',
        },
        {
          nodePlug: { valA: 3, valB: 0 },
          content: [{ content: '2' }],
          type: 'Number',
          value: '2',
        },
        {
          nodePlug: { valA: 4, valB: 0 },
          content: [{ content: '1' }],
          type: 'Number',
          value: '1',
        },
        {
          nodePlug: { valA: 2, valB: 0 },
          content: [
            { valA: 2, valB: 1, type: 'Number' },
            { content: ' + ' },
            { valA: 2, valB: 2, type: 'Number' },
          ],
          type: 'Number',
          value: '3',
        },
        {
          nodePlug: { valA: 0, valB: 0 },
          content: [
            { valA: 0, valB: 1, type: 'Number' },
            { content: ' * ' },
            { valA: 0, valB: 2, type: 'Number' },
          ],
          type: 'Number',
          value: '9',
        },
      ],
      edges: [
        {
          plugA: { valA: 0, valB: 1, type: 'Number' },
          plugB: { valA: 1, valB: 0 },
        },
        {
          plugA: { valA: 0, valB: 2, type: 'Number' },
          plugB: { valA: 2, valB: 0 },
        },
        {
          plugA: { valA: 2, valB: 1, type: 'Number' },
          plugB: { valA: 3, valB: 0 },
        },
        {
          plugA: { valA: 2, valB: 2, type: 'Number' },
          plugB: { valA: 4, valB: 0 },
        },
      ],
      root: {
        nodePlug: { valA: 0, valB: 0 },
        content: [
          { valA: 0, valB: 1, type: 'Number' },
          { content: ' * ' },
          { valA: 0, valB: 2, type: 'Number' },
        ],
        type: 'Number',
        value: '9',
      },
    },
  },
  {
    it: 'create diagram for block (costume number): test for type of block with dropdown',
    args: [
      {
        rendered: true,
        useDragSurface_: true,
        id: '?Qp?ctK,00+cYOudt`;I',
        nextConnection: null,
        previousConnection: null,
        inputList: [
          {
            type: 5,
            name: '',
            connection: null,
            fieldRow: [
              {
                text_: 'costume',
                arrowWidth_: 0,
                renderWidth: 60.46296310424805,
                renderSep: 0,
              },
              {
                menuGenerator_: [
                  ['number', 'number'],
                  ['name', 'name'],
                ],
                prefixField: null,
                suffixField: null,
                value_: 'number',
                imageJson_: null,
                text_: 'number',
                maxDisplayLength: null,
                name: 'NUMBER_NAME',
                arrowSize_: 12,
                arrowX_: 72.25,
                arrowY_: 11,
                className_: 'blocklyText blocklyDropdownText',
                arrowWidth_: 20,
                renderWidth: 96.25,
                renderSep: 0,
              },
            ],
            outlinePath: null,
            renderHeight: 40,
            renderWidth: 0,
            fieldWidth: 164.71296310424805,
          },
        ],
        inputsInline: true,
        disabled: false,
        tooltip: '',
        contextMenu: true,
        parentBlock_: null,
        deletable_: true,
        movable_: true,
        editable_: true,
        isShadow_: false,
        collapsed_: false,
        checkboxInFlyout_: true,
        comment: null,
        outputShape_: 2,
        category_: 'looks',
        isInFlyout: false,
        isInMutator: false,
        RTL: false,
        isInsertionMarker_: false,
        type: 'looks_costumenumbername',
        colour_: '#9966FF',
        colourSecondary_: '#855CD6',
        colourTertiary_: '#774DCB',
        inputsInlineDefault: true,
        eventsInit_: true,
        startHat_: false,
        squareTopLeftCorner_: true,
        edgeShapeWidth_: 20,
        edgeShape_: 2,
        width: 188.71296310424805,
        height: 40,
        isGlowingStack_: false,
      },
      {
        topBlock: '?Qp?ctK,00+cYOudt`;I',
        status: 4,
        isKilled: false,
        blockContainer: {
          _cache: {
            _executeCached: {
              '?Qp?ctK,00+cYOudt`;I': {
                id: '?Qp?ctK,00+cYOudt`;I',
                opcode: 'looks_costumenumbername',
                _profiler: null,
                _profilerFrame: null,
                _isHat: false,
                _definedBlockFunction: true,
                _isShadowBlock: false,
                _shadowValue: false,
                _parentKey: null,
                _parentValues: null,
              },
            },
          },
        },
        requestScriptGlowInFrame: true,
        blockGlowInFrame: '?Qp?ctK,00+cYOudt`;I',
        warpTimer: null,
        justReported: 1,
        stackClick: false,
        updateMonitor: false,
      },
    ],
    expected: {
      nodes: [
        {
          nodePlug: { valA: 0, valB: 0 },
          content: [{ content: 'costume number' }],
          type: 'Number',
          value: '1',
        },
      ],
      edges: [],
      root: {
        nodePlug: { valA: 0, valB: 0 },
        content: [{ content: 'costume number' }],
        type: 'Number',
        value: '1',
      },
    },
  },
  {
    it: 'create diagram for block (round (username)): test for invalid block type (wrong edge)',
    args: [
      {
        rendered: true,
        useDragSurface_: true,
        id: '6sJ%#G@0MPoyfE/yAt+J',
        nextConnection: null,
        previousConnection: null,
        inputList: [
          {
            type: 1,
            name: 'NUM',
            connection: {
              type: 1,
              hidden_: false,
              targetConnection: {
                sourceBlock_: {
                  rendered: true,
                  useDragSurface_: true,
                  id: 'sj2l6R:ZtT5Vzg?+0lZ)',
                  nextConnection: null,
                  previousConnection: null,
                  inputList: [
                    {
                      type: 5,
                      name: '',
                      connection: null,
                      fieldRow: [
                        {
                          text_: 'username',
                          arrowWidth_: 0,
                          renderWidth: 71.15625,
                          renderSep: 0,
                        },
                      ],
                      outlinePath: null,
                      renderHeight: 40,
                      renderWidth: 0,
                      fieldWidth: 71.15625,
                    },
                  ],
                  inputsInline: true,
                  disabled: false,
                  tooltip: '',
                  contextMenu: true,
                  deletable_: true,
                  movable_: true,
                  editable_: true,
                  isShadow_: false,
                  collapsed_: false,
                  checkboxInFlyout_: true,
                  comment: null,
                  outputShape_: 2,
                  category_: 'sensing',
                  isInFlyout: false,
                  isInMutator: false,
                  RTL: false,
                  isInsertionMarker_: false,
                  type: 'sensing_username',
                  colour_: '#5CB1D6',
                  colourSecondary_: '#47A8D1',
                  colourTertiary_: '#2E8EB8',
                  inputsInlineDefault: true,
                  eventsInit_: true,
                  startHat_: false,
                  squareTopLeftCorner_: true,
                  edgeShapeWidth_: 20,
                  edgeShape_: 2,
                  width: 95.15625,
                  height: 40,
                },
                type: 2,
                hidden_: false,
                x_: 185.51446759259255,
                y_: 550.4891632575692,
                inDB_: true,
              },
              x_: 185.51446759259255,
              y_: 550.4891632575692,
              inDB_: true,
            },
            fieldRow: [
              {
                text_: 'round',
                arrowWidth_: 0,
                renderWidth: 40.921875,
                renderSep: 0,
              },
            ],
            renderHeight: 48,
            renderWidth: 95.15625,
            fieldWidth: 40.921875,
          },
        ],
        inputsInline: true,
        disabled: false,
        tooltip: '',
        contextMenu: true,
        parentBlock_: null,
        deletable_: true,
        movable_: true,
        editable_: true,
        isShadow_: false,
        collapsed_: false,
        checkboxInFlyout_: false,
        comment: null,
        outputShape_: 2,
        category_: 'operators',
        isInFlyout: false,
        isInMutator: false,
        RTL: false,
        isInsertionMarker_: false,
        type: 'operator_round',
        colour_: '#59C059',
        colourSecondary_: '#46B946',
        colourTertiary_: '#389438',
        inputsInlineDefault: true,
        eventsInit_: true,
        startHat_: false,
        squareTopLeftCorner_: true,
        edgeShapeWidth_: 24,
        edgeShape_: 2,
        width: 160.078125,
        height: 48,
        isGlowingStack_: false,
      },
      {
        topBlock: '6sJ%#G@0MPoyfE/yAt+J',
        status: 4,
        isKilled: false,
        blockContainer: {
          _cache: {
            _executeCached: {
              'sj2l6R:ZtT5Vzg?+0lZ)': {
                id: 'sj2l6R:ZtT5Vzg?+0lZ)',
                opcode: 'sensing_username',
                _profiler: null,
                _profilerFrame: null,
                _isHat: false,
                _definedBlockFunction: true,
                _isShadowBlock: false,
                _shadowValue: false,
                _parentKey: 'NUM',
                _parentValues: { NUM: 'asd6011' },
              },
              '6sJ%#G@0MPoyfE/yAt+J': {
                id: '6sJ%#G@0MPoyfE/yAt+J',
                opcode: 'operator_round',
                _profiler: null,
                _profilerFrame: null,
                _isHat: false,
                _definedBlockFunction: true,
                _isShadowBlock: false,
                _shadowValue: false,
                _parentKey: null,
                _parentValues: null,
              },
            },
          },
        },
        requestScriptGlowInFrame: true,
        blockGlowInFrame: '6sJ%#G@0MPoyfE/yAt+J',
        warpTimer: null,
        justReported: 0,
        stackClick: false,
        updateMonitor: false,
      },
    ],
    expected: {
      nodes: [
        {
          nodePlug: { valA: 1, valB: 0 },
          content: [{ content: 'username' }],
          type: 'String',
          value: '"asd6011"',
        },
        {
          nodePlug: { valA: 0, valB: 0 },
          content: [
            { content: 'round ' },
            { valA: 0, valB: 1, type: 'Number' },
          ],
          type: 'Number',
          value: '0',
        },
      ],
      edges: [
        {
          plugA: { valA: 0, valB: 1, type: 'Number' },
          plugB: { valA: 1, valB: 0 },
          isHighlighted: true,
        },
      ],
      root: {
        nodePlug: { valA: 0, valB: 0 },
        content: [{ content: 'round ' }, { valA: 0, valB: 1, type: 'Number' }],
        type: 'Number',
        value: '0',
      },
    },
  },
  {
    it: 'create diagram for block (username) in (set pitch effect to (username)): test for invalid block type (wrong root)',
    args: [
      {
        svgGroup_: { id: '' },
        svgPath_: { id: '' },
        rendered: true,
        useDragSurface_: true,
        id: '!p.@~}QXqz-|~7Z%=;I`',
        outputConnection: {},
        nextConnection: null,
        previousConnection: null,
        inputList: [
          {
            type: 5,
            name: '',
            sourceBlock_: { id: '!p.@~}QXqz-|~7Z%=;I`' },
            connection: null,
            fieldRow: [
              {
                size_: {},
                text_: 'username',
                sourceBlock_: { id: '!p.@~}QXqz-|~7Z%=;I`' },
                textElement_: { id: '' },
                arrowWidth_: 0,
                renderWidth: 71.15625,
                renderSep: 0,
              },
            ],
            outlinePath: null,
            renderHeight: 40,
            renderWidth: 0,
            fieldWidth: 71.15625,
          },
        ],
        inputsInline: true,
        disabled: false,
        tooltip: '',
        contextMenu: true,
        parentBlock_: {
          svgGroup_: { id: '' },
          svgPath_: { id: '' },
          rendered: true,
          useDragSurface_: true,
          id: '.=9[BP(XgT!XS/E5HA=#',
          outputConnection: null,
          nextConnection: {},
          previousConnection: {},
          inputList: [
            {
              type: 1,
              name: 'VALUE',
              sourceBlock_: { id: '.=9[BP(XgT!XS/E5HA=#' },
              connection: {
                sourceBlock_: { id: '.=9[BP(XgT!XS/E5HA=#' },
                type: 1,
                db_: {},
                dbOpposite_: {},
                hidden_: false,
                offsetInBlock_: {},
                shadowDom_: { id: '^[oM;qT0[C4olsL^8uo/' },
                targetConnection: {
                  sourceBlock_: { id: '!p.@~}QXqz-|~7Z%=;I`' },
                  type: 2,
                  db_: {},
                  dbOpposite_: {},
                  hidden_: false,
                  offsetInBlock_: {},
                  check_: {},
                  targetConnection: {},
                  x_: 326.4375,
                  y_: 684,
                  inDB_: true,
                },
                x_: 326.4375,
                y_: 684,
                inDB_: true,
              },
              fieldRow: [
                {
                  size_: {},
                  text_: 'set',
                  sourceBlock_: { id: '.=9[BP(XgT!XS/E5HA=#' },
                  textElement_: { id: '' },
                  arrowWidth_: 0,
                  renderWidth: 21.34375,
                  renderSep: 0,
                },
                {
                  menuGenerator_: [
                    ['pitch', 'PITCH'],
                    ['pan left/right', 'PAN'],
                  ],
                  prefixField: null,
                  suffixField: null,
                  size_: {},
                  value_: 'PITCH',
                  imageJson_: null,
                  text_: 'pitch',
                  maxDisplayLength: null,
                  argType_: {},
                  sourceBlock_: { id: '.=9[BP(XgT!XS/E5HA=#' },
                  name: 'EFFECT',
                  arrowSize_: 12,
                  arrowX_: 51.796875,
                  arrowY_: 11,
                  arrow_: { id: '' },
                  className_: 'blocklyText blocklyDropdownText',
                  fieldGroup_: { id: '' },
                  textElement_: { id: '' },
                  arrowWidth_: 20,
                  mouseDownWrapper_: {},
                  box_: { id: '' },
                  renderWidth: 75.796875,
                  renderSep: 0,
                },
                {
                  size_: {},
                  text_: 'effect to',
                  sourceBlock_: { id: '.=9[BP(XgT!XS/E5HA=#' },
                  textElement_: { id: '' },
                  arrowWidth_: 0,
                  renderWidth: 56.640625,
                  renderSep: 0,
                },
              ],
              outlinePath: { id: '' },
              renderHeight: 48,
              renderWidth: 95.15625,
              fieldWidth: 169.78125,
            },
          ],
          inputsInline: true,
          disabled: false,
          tooltip: '',
          contextMenu: true,
          parentBlock_: null,
          childBlocks_: {},
          deletable_: true,
          movable_: true,
          editable_: true,
          isShadow_: false,
          collapsed_: false,
          checkboxInFlyout_: false,
          comment: null,
          outputShape_: null,
          category_: 'sounds',
          xy_: {},
          workspace: { id: 'g;?rtD$G@*bK!NCKt3kw' },
          isInFlyout: false,
          isInMutator: false,
          RTL: false,
          isInsertionMarker_: false,
          type: 'sound_seteffectto',
          colour_: '#CF63CF',
          colourSecondary_: '#C94FC9',
          colourTertiary_: '#BD42BD',
          inputsInlineDefault: true,
          eventsInit_: true,
          startHat_: false,
          squareTopLeftCorner_: false,
          edgeShapeWidth_: 0,
          edgeShape_: null,
          width: 299.59375,
          height: 56,
          isGlowingStack_: false,
        },
        childBlocks_: {},
        deletable_: true,
        movable_: true,
        editable_: true,
        isShadow_: false,
        collapsed_: false,
        checkboxInFlyout_: true,
        comment: null,
        outputShape_: 2,
        category_: 'sensing',
        xy_: {},
        workspace: { id: 'g;?rtD$G@*bK!NCKt3kw' },
        isInFlyout: false,
        isInMutator: false,
        RTL: false,
        isInsertionMarker_: false,
        type: 'sensing_username',
        colour_: '#5CB1D6',
        colourSecondary_: '#47A8D1',
        colourTertiary_: '#2E8EB8',
        inputsInlineDefault: true,
        eventsInit_: true,
        startHat_: false,
        squareTopLeftCorner_: true,
        edgeShapeWidth_: 20,
        edgeShape_: 2,
        width: 95.15625,
        height: 40,
      },
      {
        topBlock: '!p.@~}QXqz-|~7Z%=;I`',
        stack: {},
        stackFrames: {},
        status: 4,
        isKilled: false,
        target: { id: 'I0ddSDhqgiwyi#j53n4#' },
        blockContainer: {
          _cache: {
            _executeCached: {
              '!p.@~}QXqz-|~7Z%=;I`': {
                id: '!p.@~}QXqz-|~7Z%=;I`',
                opcode: 'sensing_username',
                fields: {},
                inputs: {},
                _profiler: null,
                _profilerFrame: null,
                _isHat: false,
                _definedBlockFunction: true,
                _isShadowBlock: false,
                _shadowValue: false,
                _fields: {},
                _inputs: {},
                _argValues: {},
                _parentKey: null,
                _parentValues: null,
                _ops: {},
              },
            },
          },
        },
        requestScriptGlowInFrame: true,
        blockGlowInFrame: '!p.@~}QXqz-|~7Z%=;I`',
        warpTimer: null,
        justReported: 'asd6011',
        stackClick: false,
        updateMonitor: false,
      },
    ],
    expected: {
      nodes: [
        {
          nodePlug: { valA: 0, valB: 0 },
          content: [{ content: 'username' }],
          type: 'String',
          isHighlighted: true,
          value: '"asd6011"',
        },
      ],
      edges: [],
      root: {
        nodePlug: { valA: 0, valB: 0 },
        content: [{ content: 'username' }],
        type: 'String',
        isHighlighted: true,
        value: '"asd6011"',
      },
    },
  },
  {
    it: 'create diagram for block (answer) in (ask (answer) and wait): test for valid block type',
    args: [
      {
        svgGroup_: { id: '' },
        svgPath_: { id: '' },
        rendered: true,
        useDragSurface_: true,
        id: '4d9r|L]^EjYO@XC;`YuR',
        outputConnection: {},
        nextConnection: null,
        previousConnection: null,
        inputList: [
          {
            type: 5,
            name: '',
            sourceBlock_: { id: '4d9r|L]^EjYO@XC;`YuR' },
            connection: null,
            fieldRow: [
              {
                size_: {},
                text_: 'answer',
                sourceBlock_: { id: '4d9r|L]^EjYO@XC;`YuR' },
                textElement_: { id: '' },
                arrowWidth_: 0,
                renderWidth: 51.578125,
                renderSep: 0,
              },
            ],
            outlinePath: null,
            renderHeight: 40,
            renderWidth: 0,
            fieldWidth: 51.578125,
          },
        ],
        inputsInline: true,
        disabled: false,
        tooltip: '',
        contextMenu: true,
        parentBlock_: {
          svgGroup_: { id: '' },
          svgPath_: { id: '' },
          rendered: true,
          useDragSurface_: true,
          id: 'zyS~djKNhdh4X,nQkm/0',
          outputConnection: null,
          nextConnection: {},
          previousConnection: {},
          inputList: [
            {
              type: 1,
              name: 'QUESTION',
              sourceBlock_: { id: 'zyS~djKNhdh4X,nQkm/0' },
              connection: {
                sourceBlock_: { id: 'zyS~djKNhdh4X,nQkm/0' },
                type: 1,
                db_: {},
                dbOpposite_: {},
                hidden_: false,
                offsetInBlock_: {},
                shadowDom_: { id: 'aKl:kVpUAmG[i^v$(|ow' },
                targetConnection: {
                  sourceBlock_: { id: '4d9r|L]^EjYO@XC;`YuR' },
                  type: 2,
                  db_: {},
                  dbOpposite_: {},
                  hidden_: false,
                  offsetInBlock_: {},
                  check_: {},
                  x_: 178,
                  y_: 732,
                  inDB_: true,
                  targetConnection: {},
                },
                x_: 178,
                y_: 732,
                inDB_: true,
              },
              fieldRow: [
                {
                  size_: {},
                  text_: 'ask',
                  sourceBlock_: { id: 'zyS~djKNhdh4X,nQkm/0' },
                  textElement_: { id: '' },
                  arrowWidth_: 0,
                  renderWidth: 24.907407760620117,
                  renderSep: 0,
                },
              ],
              outlinePath: { id: '' },
              renderHeight: 48,
              renderWidth: 75.578125,
              fieldWidth: 24.907407760620117,
            },
            {
              type: 5,
              name: '',
              sourceBlock_: { id: 'zyS~djKNhdh4X,nQkm/0' },
              connection: null,
              fieldRow: [
                {
                  size_: {},
                  text_: 'and wait',
                  sourceBlock_: { id: 'zyS~djKNhdh4X,nQkm/0' },
                  textElement_: { id: '' },
                  arrowWidth_: 0,
                  renderWidth: 59.59375,
                  renderSep: 0,
                },
              ],
              outlinePath: null,
              renderHeight: 48,
              renderWidth: 0,
              fieldWidth: 59.59375,
            },
          ],
          inputsInline: true,
          disabled: false,
          tooltip: '',
          contextMenu: true,
          parentBlock_: {
            svgGroup_: { id: '' },
            svgPath_: { id: '' },
            rendered: true,
            useDragSurface_: true,
            id: '.=9[BP(XgT!XS/E5HA=#',
            outputConnection: null,
            nextConnection: {},
            previousConnection: {},
            inputList: [
              {
                type: 1,
                name: 'VALUE',
                sourceBlock_: { id: '.=9[BP(XgT!XS/E5HA=#' },
                connection: {
                  sourceBlock_: { id: '.=9[BP(XgT!XS/E5HA=#' },
                  type: 1,
                  db_: {},
                  dbOpposite_: {},
                  hidden_: false,
                  offsetInBlock_: {},
                  shadowDom_: { id: '^[oM;qT0[C4olsL^8uo/' },
                  targetConnection: {
                    sourceBlock_: {
                      svgGroup_: { id: '' },
                      svgPath_: { id: '' },
                      rendered: true,
                      useDragSurface_: true,
                      id: '!p.@~}QXqz-|~7Z%=;I`',
                      outputConnection: {},
                      nextConnection: null,
                      previousConnection: null,
                      inputList: [
                        {
                          type: 5,
                          name: '',
                          sourceBlock_: { id: '!p.@~}QXqz-|~7Z%=;I`' },
                          connection: null,
                          fieldRow: [
                            {
                              size_: {},
                              text_: 'username',
                              sourceBlock_: { id: '!p.@~}QXqz-|~7Z%=;I`' },
                              textElement_: { id: '' },
                              arrowWidth_: 0,
                              renderWidth: 71.15625,
                              renderSep: 0,
                            },
                          ],
                          outlinePath: null,
                          renderHeight: 40,
                          renderWidth: 0,
                          fieldWidth: 71.15625,
                        },
                      ],
                      inputsInline: true,
                      disabled: false,
                      tooltip: '',
                      contextMenu: true,
                      parentBlock_: { id: '.=9[BP(XgT!XS/E5HA=#' },
                      childBlocks_: {},
                      deletable_: true,
                      movable_: true,
                      editable_: true,
                      isShadow_: false,
                      collapsed_: false,
                      checkboxInFlyout_: true,
                      comment: null,
                      outputShape_: 2,
                      category_: 'sensing',
                      xy_: {},
                      workspace: { id: 'g;?rtD$G@*bK!NCKt3kw' },
                      isInFlyout: false,
                      isInMutator: false,
                      RTL: false,
                      isInsertionMarker_: false,
                      type: 'sensing_username',
                      colour_: '#5CB1D6',
                      colourSecondary_: '#47A8D1',
                      colourTertiary_: '#2E8EB8',
                      inputsInlineDefault: true,
                      eventsInit_: true,
                      startHat_: false,
                      squareTopLeftCorner_: true,
                      edgeShapeWidth_: 20,
                      edgeShape_: 2,
                      width: 95.15625,
                      height: 40,
                    },
                    type: 2,
                    db_: {},
                    dbOpposite_: {},
                    hidden_: false,
                    offsetInBlock_: {},
                    check_: {},
                    targetConnection: {},
                    x_: 326.4375,
                    y_: 684,
                    inDB_: true,
                  },
                  x_: 326.4375,
                  y_: 684,
                  inDB_: true,
                },
                fieldRow: [
                  {
                    size_: {},
                    text_: 'set',
                    sourceBlock_: { id: '.=9[BP(XgT!XS/E5HA=#' },
                    textElement_: { id: '' },
                    arrowWidth_: 0,
                    renderWidth: 21.34375,
                    renderSep: 0,
                  },
                  {
                    menuGenerator_: [
                      ['pitch', 'PITCH'],
                      ['pan left/right', 'PAN'],
                    ],
                    prefixField: null,
                    suffixField: null,
                    size_: {},
                    value_: 'PITCH',
                    imageJson_: null,
                    text_: 'pitch',
                    maxDisplayLength: null,
                    argType_: {},
                    sourceBlock_: { id: '.=9[BP(XgT!XS/E5HA=#' },
                    name: 'EFFECT',
                    arrowSize_: 12,
                    arrowX_: 51.796875,
                    arrowY_: 11,
                    arrow_: { id: '' },
                    className_: 'blocklyText blocklyDropdownText',
                    fieldGroup_: { id: '' },
                    textElement_: { id: '' },
                    arrowWidth_: 20,
                    mouseDownWrapper_: {},
                    box_: { id: '' },
                    renderWidth: 75.796875,
                    renderSep: 0,
                  },
                  {
                    size_: {},
                    text_: 'effect to',
                    sourceBlock_: { id: '.=9[BP(XgT!XS/E5HA=#' },
                    textElement_: { id: '' },
                    arrowWidth_: 0,
                    renderWidth: 56.640625,
                    renderSep: 0,
                  },
                ],
                outlinePath: { id: '' },
                renderHeight: 48,
                renderWidth: 95.15625,
                fieldWidth: 169.78125,
              },
            ],
            inputsInline: true,
            disabled: false,
            tooltip: '',
            contextMenu: true,
            parentBlock_: null,
            childBlocks_: {},
            deletable_: true,
            movable_: true,
            editable_: true,
            isShadow_: false,
            collapsed_: false,
            checkboxInFlyout_: false,
            comment: null,
            outputShape_: null,
            category_: 'sounds',
            xy_: {},
            workspace: { id: 'g;?rtD$G@*bK!NCKt3kw' },
            isInFlyout: false,
            isInMutator: false,
            RTL: false,
            isInsertionMarker_: false,
            type: 'sound_seteffectto',
            colour_: '#CF63CF',
            colourSecondary_: '#C94FC9',
            colourTertiary_: '#BD42BD',
            inputsInlineDefault: true,
            eventsInit_: true,
            startHat_: false,
            squareTopLeftCorner_: false,
            edgeShapeWidth_: 0,
            edgeShape_: null,
            width: 299.59375,
            height: 56,
            isGlowingStack_: false,
          },
          childBlocks_: {},
          deletable_: true,
          movable_: true,
          editable_: true,
          isShadow_: false,
          collapsed_: false,
          checkboxInFlyout_: false,
          comment: null,
          outputShape_: null,
          category_: 'sensing',
          xy_: {},
          workspace: { id: 'g;?rtD$G@*bK!NCKt3kw' },
          isInFlyout: false,
          isInMutator: false,
          RTL: false,
          isInsertionMarker_: false,
          type: 'sensing_askandwait',
          colour_: '#5CB1D6',
          colourSecondary_: '#47A8D1',
          colourTertiary_: '#2E8EB8',
          inputsInlineDefault: true,
          eventsInit_: true,
          startHat_: false,
          squareTopLeftCorner_: false,
          edgeShapeWidth_: 0,
          edgeShape_: null,
          width: 199.171875,
          height: 56,
        },
        childBlocks_: {},
        deletable_: true,
        movable_: true,
        editable_: true,
        isShadow_: false,
        collapsed_: false,
        checkboxInFlyout_: true,
        comment: null,
        outputShape_: 2,
        category_: 'sensing',
        xy_: {},
        workspace: { id: 'g;?rtD$G@*bK!NCKt3kw' },
        isInFlyout: false,
        isInMutator: false,
        RTL: false,
        isInsertionMarker_: false,
        type: 'sensing_answer',
        colour_: '#5CB1D6',
        colourSecondary_: '#47A8D1',
        colourTertiary_: '#2E8EB8',
        inputsInlineDefault: true,
        eventsInit_: true,
        startHat_: false,
        squareTopLeftCorner_: true,
        edgeShapeWidth_: 20,
        edgeShape_: 2,
        width: 75.578125,
        height: 40,
      },
      {
        topBlock: '4d9r|L]^EjYO@XC;`YuR',
        stack: {},
        stackFrames: {},
        status: 4,
        isKilled: false,
        target: { id: 'I0ddSDhqgiwyi#j53n4#' },
        blockContainer: {
          _cache: {
            _executeCached: {
              '4d9r|L]^EjYO@XC;`YuR': {
                id: '4d9r|L]^EjYO@XC;`YuR',
                opcode: 'sensing_answer',
                fields: {},
                inputs: {},
                _profiler: null,
                _profilerFrame: null,
                _isHat: false,
                _definedBlockFunction: true,
                _isShadowBlock: false,
                _shadowValue: false,
                _fields: {},
                _inputs: {},
                _argValues: {},
                _parentKey: null,
                _parentValues: null,
                _ops: {},
              },
            },
          },
        },
        requestScriptGlowInFrame: true,
        blockGlowInFrame: '4d9r|L]^EjYO@XC;`YuR',
        warpTimer: null,
        justReported: '',
        stackClick: false,
        updateMonitor: false,
      },
    ],
    expected: {
      nodes: [
        {
          nodePlug: { valA: 0, valB: 0 },
          content: [{ content: 'answer' }],
          type: 'String',
          value: '""',
        },
      ],
      edges: [],
      root: {
        nodePlug: { valA: 0, valB: 0 },
        content: [{ content: 'answer' }],
        type: 'String',
        value: '""',
      },
    },
  },
  {
    it: 'create diagram for block ("" and ""): test for empty blocks',
    args: [
      {
        svgGroup_: { id: '' },
        svgPath_: { id: '' },
        rendered: true,
        useDragSurface_: true,
        id: '9pKWjlRNZ_J^CTj#(e]C',
        outputConnection: {},
        nextConnection: null,
        previousConnection: null,
        inputList: [
          {
            type: 1,
            name: 'OPERAND1',
            sourceBlock_: { id: '9pKWjlRNZ_J^CTj#(e]C' },
            connection: {
              sourceBlock_: { id: '9pKWjlRNZ_J^CTj#(e]C' },
              type: 1,
              db_: {},
              dbOpposite_: {},
              hidden_: false,
              offsetInBlock_: {},
              check_: {},
              x_: 206.66666666666657,
              y_: 836.0919438468302,
              inDB_: true,
            },
            fieldRow: [],
            outlinePath: { id: '' },
            renderHeight: 40,
            renderWidth: 48,
            fieldWidth: 0,
          },
          {
            type: 1,
            name: 'OPERAND2',
            sourceBlock_: { id: '9pKWjlRNZ_J^CTj#(e]C' },
            connection: {
              sourceBlock_: { id: '9pKWjlRNZ_J^CTj#(e]C' },
              type: 1,
              db_: {},
              dbOpposite_: {},
              hidden_: false,
              offsetInBlock_: {},
              check_: {},
              x_: 297.3697916666666,
              y_: 836.0919438468302,
              inDB_: true,
            },
            fieldRow: [
              {
                size_: {},
                text_: 'and',
                sourceBlock_: { id: '9pKWjlRNZ_J^CTj#(e]C' },
                textElement_: { id: '' },
                arrowWidth_: 0,
                renderWidth: 26.703125,
                renderSep: 0,
              },
            ],
            outlinePath: { id: '' },
            renderHeight: 40,
            renderWidth: 48,
            fieldWidth: 26.703125,
          },
        ],
        inputsInline: true,
        disabled: false,
        tooltip: '',
        contextMenu: true,
        parentBlock_: null,
        childBlocks_: {},
        deletable_: true,
        movable_: true,
        editable_: true,
        isShadow_: false,
        collapsed_: false,
        checkboxInFlyout_: false,
        comment: null,
        outputShape_: 1,
        category_: 'operators',
        xy_: {},
        workspace: { id: 'g;?rtD$G@*bK!NCKt3kw' },
        isInFlyout: false,
        isInMutator: false,
        RTL: false,
        isInsertionMarker_: false,
        type: 'operator_and',
        colour_: '#59C059',
        colourSecondary_: '#46B946',
        colourTertiary_: '#389438',
        inputsInlineDefault: true,
        eventsInit_: true,
        startHat_: false,
        squareTopLeftCorner_: true,
        edgeShapeWidth_: 20,
        edgeShape_: 1,
        width: 154.703125,
        height: 40,
        isGlowingStack_: false,
      },
      {
        topBlock: '9pKWjlRNZ_J^CTj#(e]C',
        stack: {},
        stackFrames: {},
        status: 4,
        isKilled: false,
        target: { id: 'I0ddSDhqgiwyi#j53n4#' },
        blockContainer: {
          _cache: {
            _executeCached: {
              '9pKWjlRNZ_J^CTj#(e]C': {
                id: '9pKWjlRNZ_J^CTj#(e]C',
                opcode: 'operator_and',
                fields: {},
                inputs: {},
                _profiler: null,
                _profilerFrame: null,
                _isHat: false,
                _definedBlockFunction: true,
                _isShadowBlock: false,
                _shadowValue: false,
                _fields: {},
                _inputs: {},
                _argValues: {},
                _parentKey: null,
                _parentValues: null,
                _ops: {},
              },
            },
          },
        },
        requestScriptGlowInFrame: true,
        blockGlowInFrame: '9pKWjlRNZ_J^CTj#(e]C',
        warpTimer: null,
        justReported: false,
        stackClick: false,
        updateMonitor: false,
      },
    ],
    expected: {
      nodes: [
        {
          nodePlug: { valA: 1, valB: 0 },
          content: [{ content: 'false' }],
          type: 'Boolean',
          value: 'false',
        },
        {
          nodePlug: { valA: 2, valB: 0 },
          content: [{ content: 'false' }],
          type: 'Boolean',
          value: 'false',
        },
        {
          nodePlug: { valA: 0, valB: 0 },
          content: [
            { valA: 0, valB: 1, type: 'Boolean' },
            { content: ' and ' },
            { valA: 0, valB: 2, type: 'Boolean' },
          ],
          type: 'Boolean',
          value: 'false',
        },
      ],
      edges: [
        {
          plugA: { valA: 0, valB: 1, type: 'Boolean' },
          plugB: { valA: 1, valB: 0 },
        },
        {
          plugA: { valA: 0, valB: 2, type: 'Boolean' },
          plugB: { valA: 2, valB: 0 },
        },
      ],
      root: {
        nodePlug: { valA: 0, valB: 0 },
        content: [
          { valA: 0, valB: 1, type: 'Boolean' },
          { content: ' and ' },
          { valA: 0, valB: 2, type: 'Boolean' },
        ],
        type: 'Boolean',
        value: 'false',
      },
    },
  },
  {
    it: 'create diagram for block (not (mouse down?)): test for boolean block inside another block',
    args: [
      {
        svgGroup_: { id: '' },
        svgPath_: { id: '' },
        rendered: true,
        useDragSurface_: true,
        id: 'IPo0:*8hoR#LWZQXjFzC',
        outputConnection: {},
        nextConnection: null,
        previousConnection: null,
        inputList: [
          {
            type: 1,
            name: 'OPERAND',
            sourceBlock_: { id: 'IPo0:*8hoR#LWZQXjFzC' },
            connection: {
              sourceBlock_: { id: 'IPo0:*8hoR#LWZQXjFzC' },
              type: 1,
              db_: {},
              dbOpposite_: {},
              hidden_: false,
              offsetInBlock_: {},
              check_: {},
              targetConnection: {
                sourceBlock_: {
                  svgGroup_: { id: '' },
                  svgPath_: { id: '' },
                  rendered: true,
                  useDragSurface_: true,
                  id: ';Y{uT(`posn~E;y#,DfB',
                  outputConnection: {},
                  nextConnection: null,
                  previousConnection: null,
                  inputList: [
                    {
                      type: 5,
                      name: '',
                      sourceBlock_: { id: ';Y{uT(`posn~E;y#,DfB' },
                      connection: null,
                      fieldRow: [
                        {
                          size_: {},
                          text_: 'mouse down?',
                          sourceBlock_: { id: ';Y{uT(`posn~E;y#,DfB' },
                          textElement_: { id: '' },
                          arrowWidth_: 0,
                          renderWidth: 99.625,
                          renderSep: 0,
                        },
                      ],
                      outlinePath: null,
                      renderHeight: 40,
                      renderWidth: 0,
                      fieldWidth: 99.625,
                    },
                  ],
                  inputsInline: true,
                  disabled: false,
                  tooltip: '',
                  contextMenu: true,
                  parentBlock_: { id: 'IPo0:*8hoR#LWZQXjFzC' },
                  childBlocks_: {},
                  deletable_: true,
                  movable_: true,
                  editable_: true,
                  isShadow_: false,
                  collapsed_: false,
                  checkboxInFlyout_: false,
                  comment: null,
                  outputShape_: 1,
                  category_: 'sensing',
                  xy_: {},
                  workspace: { id: 'pF}Bu52r]j(*ZdH~7Ld|' },
                  isInFlyout: false,
                  isInMutator: false,
                  RTL: false,
                  isInsertionMarker_: false,
                  type: 'sensing_mousedown',
                  colour_: '#5CB1D6',
                  colourSecondary_: '#47A8D1',
                  colourTertiary_: '#2E8EB8',
                  inputsInlineDefault: true,
                  eventsInit_: true,
                  startHat_: false,
                  squareTopLeftCorner_: true,
                  edgeShapeWidth_: 20,
                  edgeShape_: 1,
                  width: 139.625,
                  height: 40,
                },
                type: 2,
                db_: {},
                dbOpposite_: {},
                hidden_: false,
                offsetInBlock_: {},
                check_: {},
                targetConnection: {},
                x_: 178.25,
                y_: 1095,
                inDB_: true,
              },
              x_: 178.25,
              y_: 1095,
              inDB_: true,
            },
            fieldRow: [
              {
                size_: {},
                text_: 'not',
                sourceBlock_: { id: 'IPo0:*8hoR#LWZQXjFzC' },
                textElement_: { id: '' },
                arrowWidth_: 0,
                renderWidth: 22.25,
                renderSep: 0,
              },
            ],
            outlinePath: { id: '' },
            renderHeight: 48,
            renderWidth: 139.625,
            fieldWidth: 22.25,
          },
        ],
        inputsInline: true,
        disabled: false,
        tooltip: '',
        contextMenu: true,
        parentBlock_: null,
        childBlocks_: {},
        deletable_: true,
        movable_: true,
        editable_: true,
        isShadow_: false,
        collapsed_: false,
        checkboxInFlyout_: false,
        comment: null,
        outputShape_: 1,
        category_: 'operators',
        xy_: {},
        workspace: { id: 'pF}Bu52r]j(*ZdH~7Ld|' },
        isInFlyout: false,
        isInMutator: false,
        RTL: false,
        isInsertionMarker_: false,
        type: 'operator_not',
        colour_: '#59C059',
        colourSecondary_: '#46B946',
        colourTertiary_: '#389438',
        inputsInlineDefault: true,
        eventsInit_: true,
        startHat_: false,
        squareTopLeftCorner_: true,
        edgeShapeWidth_: 24,
        edgeShape_: 1,
        width: 197.875,
        height: 48,
        isGlowingStack_: false,
      },
      {
        topBlock: 'IPo0:*8hoR#LWZQXjFzC',
        stack: {},
        stackFrames: {},
        status: 4,
        isKilled: false,
        target: { id: '=zyq?/kSSR|o@JTnD:OD' },
        blockContainer: {
          _cache: {
            _executeCached: {
              ';Y{uT(`posn~E;y#,DfB': {
                id: ';Y{uT(`posn~E;y#,DfB',
                opcode: 'sensing_mousedown',
                fields: {},
                inputs: {},
                _profiler: null,
                _profilerFrame: null,
                _isHat: false,
                _definedBlockFunction: true,
                _isShadowBlock: false,
                _shadowValue: false,
                _fields: {},
                _inputs: {},
                _argValues: {},
                _parentKey: 'OPERAND',
                _parentValues: { OPERAND: false },
                _ops: {},
              },
              'IPo0:*8hoR#LWZQXjFzC': {
                id: 'IPo0:*8hoR#LWZQXjFzC',
                opcode: 'operator_not',
                fields: {},
                inputs: {},
                _profiler: null,
                _profilerFrame: null,
                _isHat: false,
                _definedBlockFunction: true,
                _isShadowBlock: false,
                _shadowValue: false,
                _fields: {},
                _inputs: {},
                _argValues: {},
                _parentKey: null,
                _parentValues: null,
                _ops: {},
              },
            },
          },
        },
        requestScriptGlowInFrame: true,
        blockGlowInFrame: 'IPo0:*8hoR#LWZQXjFzC',
        warpTimer: null,
        justReported: true,
        stackClick: false,
        updateMonitor: false,
      },
    ],
    expected: {
      nodes: [
        {
          nodePlug: { valA: 1, valB: 0 },
          content: [{ content: 'mouse down?' }],
          type: 'Boolean',
          value: 'false',
        },
        {
          nodePlug: { valA: 0, valB: 0 },
          content: [{ content: 'not ' }, { valA: 0, valB: 1, type: 'Boolean' }],
          type: 'Boolean',
          value: 'true',
        },
      ],
      edges: [
        {
          plugA: { valA: 0, valB: 1, type: 'Boolean' },
          plugB: { valA: 1, valB: 0 },
        },
      ],
      root: {
        nodePlug: { valA: 0, valB: 0 },
        content: [{ content: 'not ' }, { valA: 0, valB: 1, type: 'Boolean' }],
        type: 'Boolean',
        value: 'true',
      },
    },
  },
  {
    it: 'create diagram for block (color "#61feff" is touching "#19577c"?): test for color blocks',
    args: [
      {
        svgGroup_: { id: '' },
        svgPath_: { id: '' },
        rendered: true,
        useDragSurface_: true,
        id: 'bq^ZhmVYXiN:iZ[lJO[{',
        outputConnection: {},
        nextConnection: null,
        previousConnection: null,
        inputList: [
          {
            type: 1,
            name: 'COLOR',
            sourceBlock_: { id: 'bq^ZhmVYXiN:iZ[lJO[{' },
            connection: {
              sourceBlock_: { id: 'bq^ZhmVYXiN:iZ[lJO[{' },
              type: 1,
              db_: {},
              dbOpposite_: {},
              hidden_: false,
              offsetInBlock_: {},
              shadowDom_: { id: 'rfBG*SneL~}r:Pf#yP3/' },
              targetConnection: {
                sourceBlock_: {
                  svgGroup_: { id: '' },
                  svgPath_: { id: '' },
                  rendered: true,
                  useDragSurface_: true,
                  id: '3MW1QeoJ#(h;`[P}iCnJ',
                  outputConnection: {},
                  nextConnection: null,
                  previousConnection: null,
                  inputList: [
                    {
                      type: 5,
                      name: '',
                      sourceBlock_: { id: '3MW1QeoJ#(h;`[P}iCnJ' },
                      connection: null,
                      fieldRow: [
                        {
                          size_: {},
                          colour_: '#61feff',
                          maxDisplayLength: null,
                          argType_: {},
                          sliderCallbacksEnabled_: false,
                          sourceBlock_: { id: '3MW1QeoJ#(h;`[P}iCnJ' },
                          name: 'COLOUR',
                          fieldGroup_: { id: '' },
                          textElement_: { id: '' },
                          arrowWidth_: 0,
                          mouseDownWrapper_: {},
                          renderWidth: 10.453125,
                          renderSep: 0,
                        },
                      ],
                      outlinePath: null,
                      renderHeight: 32,
                      renderWidth: 0,
                      fieldWidth: 10.453125,
                    },
                  ],
                  inputsInline: true,
                  disabled: false,
                  tooltip: '',
                  contextMenu: true,
                  parentBlock_: { id: 'bq^ZhmVYXiN:iZ[lJO[{' },
                  childBlocks_: {},
                  deletable_: true,
                  movable_: true,
                  editable_: true,
                  isShadow_: true,
                  collapsed_: false,
                  checkboxInFlyout_: false,
                  comment: null,
                  outputShape_: 2,
                  category_: null,
                  xy_: {},
                  workspace: { id: 'pF}Bu52r]j(*ZdH~7Ld|' },
                  isInFlyout: false,
                  isInMutator: false,
                  RTL: false,
                  isInsertionMarker_: false,
                  type: 'colour_picker',
                  inputsInlineDefault: true,
                  colour_: '#61feff',
                  colourSecondary_: '#61feff',
                  colourTertiary_: '#2E8EB8',
                  eventsInit_: true,
                  startHat_: false,
                  squareTopLeftCorner_: true,
                  edgeShapeWidth_: 16,
                  edgeShape_: 2,
                  width: 40,
                  height: 32,
                },
                type: 2,
                db_: {},
                dbOpposite_: {},
                hidden_: false,
                offsetInBlock_: {},
                check_: {},
                targetConnection: {},
                x_: 199.1203706529405,
                y_: 1173.7420778980888,
                inDB_: true,
              },
              x_: 199.1203706529405,
              y_: 1173.7420778980888,
              inDB_: true,
            },
            fieldRow: [
              {
                size_: {},
                text_: 'color',
                sourceBlock_: { id: 'bq^ZhmVYXiN:iZ[lJO[{' },
                textElement_: { id: '' },
                arrowWidth_: 0,
                renderWidth: 34.675926208496094,
                renderSep: 0,
              },
            ],
            outlinePath: { id: '' },
            renderHeight: 40,
            renderWidth: 40,
            fieldWidth: 34.675926208496094,
          },
          {
            type: 1,
            name: 'COLOR2',
            sourceBlock_: { id: 'bq^ZhmVYXiN:iZ[lJO[{' },
            connection: {
              sourceBlock_: { id: 'bq^ZhmVYXiN:iZ[lJO[{' },
              type: 1,
              db_: {},
              dbOpposite_: {},
              hidden_: false,
              offsetInBlock_: {},
              shadowDom_: { id: '4=-dt|4|xcJ}7by`$oQ`' },
              targetConnection: {
                sourceBlock_: {
                  svgGroup_: { id: '' },
                  svgPath_: { id: '' },
                  rendered: true,
                  useDragSurface_: true,
                  id: 'K#+u[FTEG7Pd.XT/E}#4',
                  outputConnection: {},
                  nextConnection: null,
                  previousConnection: null,
                  inputList: [
                    {
                      type: 5,
                      name: '',
                      sourceBlock_: { id: 'K#+u[FTEG7Pd.XT/E}#4' },
                      connection: null,
                      fieldRow: [
                        {
                          size_: {},
                          colour_: '#19577c',
                          maxDisplayLength: null,
                          argType_: {},
                          sliderCallbacksEnabled_: false,
                          sourceBlock_: { id: 'K#+u[FTEG7Pd.XT/E}#4' },
                          name: 'COLOUR',
                          fieldGroup_: { id: '' },
                          textElement_: { id: '' },
                          arrowWidth_: 0,
                          mouseDownWrapper_: {},
                          renderWidth: 10.453125,
                          renderSep: 0,
                        },
                      ],
                      outlinePath: null,
                      renderHeight: 32,
                      renderWidth: 0,
                      fieldWidth: 10.453125,
                    },
                  ],
                  inputsInline: true,
                  disabled: false,
                  tooltip: '',
                  contextMenu: true,
                  parentBlock_: { id: 'bq^ZhmVYXiN:iZ[lJO[{' },
                  childBlocks_: {},
                  deletable_: true,
                  movable_: true,
                  editable_: true,
                  isShadow_: true,
                  collapsed_: false,
                  checkboxInFlyout_: false,
                  comment: null,
                  outputShape_: 2,
                  category_: null,
                  xy_: {},
                  workspace: { id: 'pF}Bu52r]j(*ZdH~7Ld|' },
                  isInFlyout: false,
                  isInMutator: false,
                  RTL: false,
                  isInsertionMarker_: false,
                  type: 'colour_picker',
                  inputsInlineDefault: true,
                  colour_: '#19577c',
                  colourSecondary_: '#19577c',
                  colourTertiary_: '#2E8EB8',
                  eventsInit_: true,
                  startHat_: false,
                  squareTopLeftCorner_: true,
                  edgeShapeWidth_: 16,
                  edgeShape_: 2,
                  width: 40,
                  height: 32,
                },
                type: 2,
                db_: {},
                dbOpposite_: {},
                hidden_: false,
                offsetInBlock_: {},
                check_: {},
                targetConnection: {},
                x_: 331.60185411241315,
                y_: 1173.7420778980888,
                inDB_: true,
              },
              x_: 331.60185411241315,
              y_: 1173.7420778980888,
              inDB_: true,
            },
            fieldRow: [
              {
                size_: {},
                text_: 'is touching',
                sourceBlock_: { id: 'bq^ZhmVYXiN:iZ[lJO[{' },
                textElement_: { id: '' },
                arrowWidth_: 0,
                renderWidth: 76.48148345947266,
                renderSep: 0,
              },
            ],
            outlinePath: { id: '' },
            renderHeight: 40,
            renderWidth: 40,
            fieldWidth: 76.48148345947266,
          },
          {
            type: 5,
            name: '',
            sourceBlock_: { id: 'bq^ZhmVYXiN:iZ[lJO[{' },
            connection: null,
            fieldRow: [
              {
                size_: {},
                text_: '?',
                sourceBlock_: { id: 'bq^ZhmVYXiN:iZ[lJO[{' },
                textElement_: { id: '' },
                arrowWidth_: 0,
                renderWidth: 8.912036895751953,
                renderSep: 0,
              },
            ],
            outlinePath: null,
            renderHeight: 40,
            renderWidth: 0,
            fieldWidth: 8.912036895751953,
          },
        ],
        inputsInline: true,
        disabled: false,
        tooltip: '',
        contextMenu: true,
        parentBlock_: null,
        childBlocks_: {},
        deletable_: true,
        movable_: true,
        editable_: true,
        isShadow_: false,
        collapsed_: false,
        checkboxInFlyout_: false,
        comment: null,
        outputShape_: 1,
        category_: 'sensing',
        xy_: {},
        workspace: { id: 'pF}Bu52r]j(*ZdH~7Ld|' },
        isInFlyout: false,
        isInMutator: false,
        RTL: false,
        isInsertionMarker_: false,
        type: 'sensing_coloristouchingcolor',
        colour_: '#5CB1D6',
        colourSecondary_: '#47A8D1',
        colourTertiary_: '#2E8EB8',
        inputsInlineDefault: true,
        eventsInit_: true,
        startHat_: false,
        squareTopLeftCorner_: true,
        edgeShapeWidth_: 20,
        edgeShape_: 1,
        width: 272.0694465637207,
        height: 40,
        isGlowingStack_: false,
      },
      {
        topBlock: 'bq^ZhmVYXiN:iZ[lJO[{',
        stack: {},
        stackFrames: {},
        status: 4,
        isKilled: false,
        target: { id: '=zyq?/kSSR|o@JTnD:OD' },
        blockContainer: {
          _cache: {
            _executeCached: {
              '3MW1QeoJ#(h;`[P}iCnJ': {
                id: '3MW1QeoJ#(h;`[P}iCnJ',
                opcode: 'colour_picker',
                fields: {},
                inputs: {},
                _profiler: null,
                _profilerFrame: null,
                _isHat: false,
                _definedBlockFunction: false,
                _isShadowBlock: true,
                _shadowValue: '#61feff',
                _fields: {},
                _inputs: {},
                _argValues: {},
                _parentKey: 'COLOR',
                _parentValues: { COLOR: '#61feff', COLOR2: '#19577c' },
                _ops: {},
              },
              'K#+u[FTEG7Pd.XT/E}#4': {
                id: 'K#+u[FTEG7Pd.XT/E}#4',
                opcode: 'colour_picker',
                fields: {},
                inputs: {},
                _profiler: null,
                _profilerFrame: null,
                _isHat: false,
                _definedBlockFunction: false,
                _isShadowBlock: true,
                _shadowValue: '#19577c',
                _fields: {},
                _inputs: {},
                _argValues: {},
                _parentKey: 'COLOR2',
                _parentValues: { COLOR: '#61feff', COLOR2: '#19577c' },
                _ops: {},
              },
              'bq^ZhmVYXiN:iZ[lJO[{': {
                id: 'bq^ZhmVYXiN:iZ[lJO[{',
                opcode: 'sensing_coloristouchingcolor',
                fields: {},
                inputs: {},
                _profiler: null,
                _profilerFrame: null,
                _isHat: false,
                _definedBlockFunction: true,
                _isShadowBlock: false,
                _shadowValue: false,
                _fields: {},
                _inputs: {},
                _argValues: {},
                _parentKey: null,
                _parentValues: null,
                _ops: {},
              },
            },
          },
        },
        requestScriptGlowInFrame: true,
        blockGlowInFrame: 'bq^ZhmVYXiN:iZ[lJO[{',
        warpTimer: null,
        justReported: false,
        stackClick: false,
        updateMonitor: false,
      },
    ],
    expected: {
      nodes: [
        {
          nodePlug: { valA: 1, valB: 0 },
          content: [{ content: '#61feff' }],
          type: 'Colour',
          value: '#61feff',
        },
        {
          nodePlug: { valA: 2, valB: 0 },
          content: [{ content: '#19577c' }],
          type: 'Colour',
          value: '#19577c',
        },
        {
          nodePlug: { valA: 0, valB: 0 },
          content: [
            { content: 'color ' },
            { valA: 0, valB: 1, type: 'Colour' },
            { content: ' is touching ' },
            { valA: 0, valB: 2, type: 'Colour' },
            { content: ' ?' },
          ],
          type: 'Boolean',
          value: 'false',
        },
      ],
      edges: [
        {
          plugA: { valA: 0, valB: 1, type: 'Colour' },
          plugB: { valA: 1, valB: 0 },
        },
        {
          plugA: { valA: 0, valB: 2, type: 'Colour' },
          plugB: { valA: 2, valB: 0 },
        },
      ],
      root: {
        nodePlug: { valA: 0, valB: 0 },
        content: [
          { content: 'color ' },
          { valA: 0, valB: 1, type: 'Colour' },
          { content: ' is touching ' },
          { valA: 0, valB: 2, type: 'Colour' },
          { content: ' ?' },
        ],
        type: 'Boolean',
        value: 'false',
      },
    },
  },
  {
    it: 'create diagram for block (backdrop): test for empty dropdown',
    args: [
      {
        svgGroup_: { id: '' },
        svgPath_: { id: '' },
        rendered: true,
        useDragSurface_: true,
        id: 'eo0zkL5y_C0b$;1o,;y)',
        outputConnection: {},
        nextConnection: null,
        previousConnection: null,
        inputList: [
          {
            type: 5,
            name: '',
            sourceBlock_: { id: 'eo0zkL5y_C0b$;1o,;y)' },
            connection: null,
            fieldRow: [
              {
                size_: {},
                text_: 'backdrop',
                sourceBlock_: { id: 'eo0zkL5y_C0b$;1o,;y)' },
                textElement_: { id: '' },
                arrowWidth_: 0,
                renderWidth: 65.828125,
                renderSep: 0,
              },
              {
                menuGenerator_: [
                  ['number', 'number'],
                  ['name', 'name'],
                ],
                prefixField: null,
                suffixField: null,
                size_: {},
                value_: '',
                imageJson_: null,
                text_: '',
                maxDisplayLength: null,
                argType_: {},
                sourceBlock_: { id: 'eo0zkL5y_C0b$;1o,;y)' },
                name: 'NUMBER_NAME',
                arrowSize_: 12,
                arrowX_: 72.25,
                arrowY_: 11,
                arrow_: { id: '' },
                className_: 'blocklyText blocklyDropdownText',
                fieldGroup_: { id: '' },
                textElement_: { id: '' },
                arrowWidth_: 20,
                mouseDownWrapper_: {},
                box_: { id: '' },
                renderWidth: 96.25,
                renderSep: 0,
                useTouchInteraction_: false,
                dropDownOpen_: false,
                selectedItem: {},
              },
            ],
            outlinePath: null,
            renderHeight: 40,
            renderWidth: 0,
            fieldWidth: 170.078125,
          },
        ],
        inputsInline: true,
        disabled: false,
        tooltip: '',
        contextMenu: true,
        parentBlock_: null,
        childBlocks_: {},
        deletable_: true,
        movable_: true,
        editable_: true,
        isShadow_: false,
        collapsed_: false,
        checkboxInFlyout_: true,
        comment: null,
        outputShape_: 2,
        category_: 'looks',
        xy_: {},
        workspace: { id: 'pF}Bu52r]j(*ZdH~7Ld|' },
        isInFlyout: false,
        isInMutator: false,
        RTL: false,
        isInsertionMarker_: false,
        type: 'looks_backdropnumbername',
        colour_: '#9966FF',
        colourSecondary_: '#855CD6',
        colourTertiary_: '#774DCB',
        inputsInlineDefault: true,
        eventsInit_: true,
        startHat_: false,
        squareTopLeftCorner_: true,
        edgeShapeWidth_: 20,
        edgeShape_: 2,
        width: 194.078125,
        height: 40,
        isGlowingStack_: false,
      },
      {
        topBlock: 'eo0zkL5y_C0b$;1o,;y)',
        stack: {},
        stackFrames: {},
        status: 4,
        isKilled: false,
        target: { id: '=zyq?/kSSR|o@JTnD:OD' },
        blockContainer: {
          _cache: {
            _executeCached: {
              'eo0zkL5y_C0b$;1o,;y)': {
                id: 'eo0zkL5y_C0b$;1o,;y)',
                opcode: 'looks_backdropnumbername',
                fields: {},
                inputs: {},
                _profiler: null,
                _profilerFrame: null,
                _isHat: false,
                _definedBlockFunction: true,
                _isShadowBlock: false,
                _shadowValue: false,
                _fields: {},
                _inputs: {},
                _argValues: {},
                _parentKey: null,
                _parentValues: null,
                _ops: {},
              },
            },
          },
        },
        requestScriptGlowInFrame: true,
        blockGlowInFrame: 'eo0zkL5y_C0b$;1o,;y)',
        warpTimer: null,
        justReported: 1,
        stackClick: false,
        updateMonitor: false,
      },
    ],
    expected: {
      nodes: [
        {
          nodePlug: { valA: 0, valB: 0 },
          content: [{ content: 'backdrop' }],
          type: 'String',
          value: '"1"',
        },
      ],
      edges: [],
      root: {
        nodePlug: { valA: 0, valB: 0 },
        content: [{ content: 'backdrop' }],
        type: 'String',
        value: '"1"',
      },
    },
  },
  {
    it: 'create diagram for block (my variable) in (block name (my variable) label text): test for dynamic type checking',
    args: [
      {
        svgGroup_: { id: '' },
        svgPath_: { id: '' },
        rendered: true,
        useDragSurface_: true,
        id: 'K[NkcwXX(0Y.:m+9eekm',
        outputConnection: {},
        nextConnection: null,
        previousConnection: null,
        inputList: [
          {
            type: 5,
            name: '',
            sourceBlock_: { id: 'K[NkcwXX(0Y.:m+9eekm' },
            connection: null,
            fieldRow: [
              {
                size_: {},
                text_: 'my variable',
                maxDisplayLength: null,
                name_: 'VARIABLE',
                variableType_: '',
                sourceBlock_: { id: 'K[NkcwXX(0Y.:m+9eekm' },
                name: 'VARIABLE',
                variable_: {},
                value_: '`jEk@4|i[#Fk?(8x)AV.-my variable',
                fieldGroup_: { id: '' },
                textElement_: { id: '' },
                arrowWidth_: 0,
                mouseDownWrapper_: {},
                renderWidth: 81.78240966796875,
                renderSep: 0,
              },
            ],
            outlinePath: null,
            align: 0,
            renderHeight: 40,
            renderWidth: 0,
            fieldWidth: 81.78240966796875,
          },
        ],
        inputsInline: true,
        disabled: false,
        tooltip: '',
        contextMenu: true,
        parentBlock_: {
          svgGroup_: { id: '' },
          svgPath_: { id: '' },
          rendered: true,
          useDragSurface_: true,
          id: '?)Guc%KoxhE#^-~q#zfy',
          outputConnection: null,
          nextConnection: {},
          previousConnection: {},
          inputList: [
            {
              type: 5,
              name: '',
              sourceBlock_: { id: '?)Guc%KoxhE#^-~q#zfy' },
              connection: null,
              fieldRow: [
                {
                  size_: {},
                  text_: 'block name',
                  sourceBlock_: { id: '?)Guc%KoxhE#^-~q#zfy' },
                  textElement_: { id: '' },
                  arrowWidth_: 0,
                  renderWidth: 81.80555725097656,
                  renderSep: 0,
                },
              ],
              outlinePath: null,
              renderHeight: 48,
              renderWidth: 0,
              fieldWidth: 81.80555725097656,
            },
            {
              type: 1,
              name: '58Kiio~dk]C3`V!}L`%E',
              sourceBlock_: { id: '?)Guc%KoxhE#^-~q#zfy' },
              connection: {
                sourceBlock_: { id: '?)Guc%KoxhE#^-~q#zfy' },
                type: 1,
                db_: {},
                dbOpposite_: {},
                hidden_: false,
                offsetInBlock_: {},
                shadowDom_: { id: 'G^1-SPoSD%SnDW#h.I[e' },
                targetConnection: {
                  sourceBlock_: { id: 'K[NkcwXX(0Y.:m+9eekm' },
                  type: 2,
                  db_: {},
                  dbOpposite_: {},
                  hidden_: false,
                  offsetInBlock_: {},
                  check_: {},
                  x_: 226.84259428801363,
                  y_: 999.9028476432538,
                  inDB_: true,
                  targetConnection: {},
                },
                x_: 226.84259428801363,
                y_: 999.9028476432538,
                inDB_: true,
              },
              fieldRow: [],
              outlinePath: { id: '' },
              renderHeight: 48,
              renderWidth: 105.78240966796875,
              fieldWidth: 0,
            },
            {
              type: 5,
              name: '',
              sourceBlock_: { id: '?)Guc%KoxhE#^-~q#zfy' },
              connection: null,
              fieldRow: [
                {
                  size_: {},
                  text_: 'label text',
                  sourceBlock_: { id: '?)Guc%KoxhE#^-~q#zfy' },
                  textElement_: { id: '' },
                  arrowWidth_: 0,
                  renderWidth: 64.02777862548828,
                  renderSep: 0,
                },
              ],
              outlinePath: null,
              renderHeight: 48,
              renderWidth: 0,
              fieldWidth: 64.02777862548828,
            },
          ],
          inputsInline: true,
          disabled: false,
          tooltip: '',
          contextMenu: true,
          parentBlock_: null,
          childBlocks_: {},
          deletable_: true,
          movable_: true,
          editable_: true,
          isShadow_: false,
          collapsed_: false,
          checkboxInFlyout_: false,
          comment: null,
          outputShape_: null,
          category_: null,
          xy_: {},
          workspace: { id: 'g;?rtD$G@*bK!NCKt3kw' },
          isInFlyout: false,
          isInMutator: false,
          RTL: false,
          isInsertionMarker_: false,
          type: 'procedures_call',
          colour_: '#FF6680',
          colourSecondary_: '#FF4D6A',
          colourTertiary_: '#FF3355',
          procCode_: 'block name %s label text',
          argumentIds_: {},
          warp_: false,
          inputsInlineDefault: true,
          generateShadows_: null,
          eventsInit_: true,
          startHat_: false,
          squareTopLeftCorner_: false,
          edgeShapeWidth_: 0,
          edgeShape_: null,
          width: 283.6157455444336,
          height: 56,
          isGlowingStack_: false,
        },
        childBlocks_: {},
        deletable_: true,
        movable_: true,
        editable_: true,
        isShadow_: false,
        collapsed_: false,
        checkboxInFlyout_: true,
        comment: null,
        outputShape_: 2,
        category_: 'data',
        xy_: {},
        workspace: { id: 'g;?rtD$G@*bK!NCKt3kw' },
        isInFlyout: false,
        isInMutator: false,
        RTL: false,
        isInsertionMarker_: false,
        type: 'data_variable',
        colour_: '#FF8C1A',
        colourSecondary_: '#FF8000',
        colourTertiary_: '#DB6E00',
        inputsInlineDefault: true,
        eventsInit_: true,
        startHat_: false,
        squareTopLeftCorner_: true,
        edgeShapeWidth_: 20,
        edgeShape_: 2,
        width: 105.78240966796875,
        height: 40,
      },
      {
        topBlock: 'K[NkcwXX(0Y.:m+9eekm',
        stack: {},
        stackFrames: {},
        status: 4,
        isKilled: false,
        target: { id: 'I0ddSDhqgiwyi#j53n4#' },
        blockContainer: {
          _cache: {
            _executeCached: {
              'K[NkcwXX(0Y.:m+9eekm': {
                id: 'K[NkcwXX(0Y.:m+9eekm',
                opcode: 'data_variable',
                fields: {},
                inputs: {},
                _profiler: null,
                _profilerFrame: null,
                _isHat: false,
                _definedBlockFunction: true,
                _isShadowBlock: false,
                _shadowValue: false,
                _fields: {},
                _inputs: {},
                _argValues: {},
                _parentKey: null,
                _parentValues: null,
                _ops: {},
              },
            },
          },
        },
        requestScriptGlowInFrame: true,
        blockGlowInFrame: 'K[NkcwXX(0Y.:m+9eekm',
        warpTimer: null,
        justReported: 0,
        stackClick: false,
        updateMonitor: false,
      },
    ],
    expected: {
      nodes: [
        {
          nodePlug: { valA: 0, valB: 0 },
          content: [{ content: 'my variable' }],
          type: ['Number', 'String', 'Boolean', 'Colour'],
          value: '0',
        },
      ],
      edges: [],
      root: {
        nodePlug: { valA: 0, valB: 0 },
        content: [{ content: 'my variable' }],
        type: ['Number', 'String', 'Boolean', 'Colour'],
        value: '0',
      },
    },
  },
];

export default createDiagramTests;
